function init(){getCurrentPosition(),submitReport(),retrieveFromDB()}function getCurrentPosition(){navigator.geolocation?navigator.geolocation.getCurrentPosition(saveGeoData):alert("Sorry, you do not have geolocation enabled for your browser")}function saveGeoData(a){reportData.lat=a.coords.latitude,reportData.lng=a.coords.longitude}function saveTextData(){reportData.msg=$("#new-report-message").val()}function sendToDB(){firebase.database().ref("reports/").push(reportData),firebase.database().ref("user-reports/"+reportData.user).push(reportData)}function submitReport(){$("#submit-report").click(function(a){a.preventDefault(),console.log("Submit Report clicked!"),saveTextData(),sendToDB()})}function retrieveFromDB(){var a=firebase.database().ref("reports/").limitToLast(100);a.on("child_added",function(a){addReportElement(a.val().lng)})}function addReportElement(a){$(".recent-reports").append("<p>"+a+"</p>")}function writeUserData(a){firebase.database().ref("users/"+a).set({userId:a})}var reportData={};$("#sign-in").click(function(){console.log("sign in clicked"),firebase.auth().signInAnonymously()}),$("#sign-out").click(function(){console.log("sign out clicked"),alert("User signed out!"),firebase.auth().signOut()}),firebase.auth().onAuthStateChanged(function(a){a&&(alert("User signed-in!"),writeUserData(a.uid),reportData.user=a.uid)}),$(function(){init()});